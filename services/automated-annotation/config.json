{
  "service": {
    "name": "automated-annotation",
    "description": "Automated annotation service using LangChain for knowledge extraction and text annotation",
    "version": "1.0.0"
  },
  "deployment": {
    "runtime": "python3.11",
    "timeout": 300,
    "memory": 1024,
    "layers": [
      "arn:aws:lambda:eu-west-2:193757560043:layer:intelligent-functions-python:5"
    ],
    "extra_env": {
      "DSL_API_BASE_URL": "https://1hc7v2pi9d.execute-api.eu-west-2.amazonaws.com/staging",
      "DSL_API_KEY": "",
      "ANNOTATION_DSL_API_BASE_URL": "https://xu89om0525.execute-api.eu-west-2.amazonaws.com/staging",
      "ANNOTATION_API_KEY": "",
      "IFL_API_BASE_URL": "https://ituo0x1fj5.execute-api.eu-west-2.amazonaws.com/staging",
      "ANNOTATION_IFL_API_BASE_URL": "https://mabi7l7lvl.execute-api.eu-west-2.amazonaws.com/staging",
      "VERTEXAI_PROJECT": "truss-data-science"
    }
  },
  "database": {
    "required": false,
    "connection_type": "none",
    "permissions": []
  },
  "api": {
    "base_path": "/automations/annotation",
    "cors_enabled": true,
    "endpoints": [
      {
        "path": "/bags/classify/model",
        "method": "POST",
        "description": "Classify bag model using vector-based similarity search (image vector from image). Returns model, model_id, root_model, root_model_id, and confidence.",
        "parameters": {
          "body": {
            "image": "string (required) - Processing/Image ID stored in the image-processing DynamoDB table. Signed image URL will be looked up automatically.",
            "brand": "string (required) - Brand namespace for Pinecone (e.g., 'jacquemus'). Uses 7 nearest neighbors by default"
          }
        }
      },
      {
        "path": "/bags/classify/{property}",
        "method": "POST",
        "description": "Classify a bag property (type, material, colour, etc.) using the DSL orchestrator. For model/material, returns simplified response with only essential fields.",
        "parameters": {
          "body": {
            "image": "string (required) - Processing/Image ID. Signed image URL will be looked up automatically from annotation-data-service-layer.",
            "text_dump": "string (required) - Textual description/context used for classification",
            "brand": "string (optional) - Brand context passed to the classifier",
            "input_mode": "string (optional) - Input mode (default: auto)",
            "resolve_names": "boolean (optional) - Include resolved names in response"
          }
        }
      },
      {
        "path": "/health",
        "method": "GET",
        "description": "Health check endpoint for the automated annotation service",
        "parameters": {}
      }
    ]
  },
  "aws": {
    "region": "eu-west-2",
    "account_id": "193757560043",
    "vpc_id": "vpc-04e79f1770f4205de"
  },
  "access": {
    "internal": true,
    "external": true,
    "auth_config": {
      "cognito": {
        "user_pool_arn": "arn:aws:cognito-idp:eu-west-2:193757560043:userpool/eu-west-2_JyaPgaRFW",
        "cors_origin": "*"
      },
      "api_key": {
        "cors_origin": "*"
      }
    }
  },
  "llm": {}
}

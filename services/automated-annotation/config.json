{
  "service": {
    "name": "automated-annotation",
    "description": "Automated annotation service using LangChain for knowledge extraction and text annotation",
    "version": "1.0.0"
  },
  "deployment": {
    "runtime": "python3.11",
    "timeout": 300,
    "memory": 1024,
    "layers": []
  },
  "database": {
    "required": false,
    "connection_type": "none",
    "permissions": []
  },
  "api": {
    "base_path": "/automations/annotation",
    "cors_enabled": true,
    "endpoints": [
      {
        "path": "/classify",
        "method": "POST",
        "description": "Classify endpoint - routes to property classification or model classification based on request payload. For property classification: requires 'property' and 'root_type_id'. For model classification: requires 'image_url' and 'brand' (no property/root_type_id).",
        "parameters": {
          "body": {
            "property": "string (optional) - Property to classify (e.g., material) - required for property classification",
            "root_type_id": "number (optional) - Root type ID - required for property classification",
            "processing_id": "string (optional) - Processing ID (or 'processingId') referencing the image-processing DynamoDB record - required for model classification",
            "image_url": "string (optional) - Image URL for property classification",
            "brand": "string (optional) - Brand name - required for model classification",
            "title": "string (optional)",
            "description": "string (optional)",
            "text_metadata": "string (optional) - Override composite metadata",
            "input_mode": "string (optional) - auto|image-only|text-only|multimodal",
            "resolve_names": "boolean (optional) - If true, include names for IDs",
            "k": "number (optional) - Number of nearest neighbors for voting (model classification only, default: 7)"
          }
        }
      },
      {
        "path": "/classify-model",
        "method": "POST",
        "description": "Classify product model using vector-based similarity search (no LLM context required) - DEPRECATED: Use /classify with processing_id and brand instead",
        "parameters": {
          "body": {
            "processing_id": "string (required) - Processing ID (or 'processingId') referencing the image-processing DynamoDB record",
            "brand": "string (required) - Brand name (e.g., 'jacquemus', 'gucci', 'prada') - used as Pinecone namespace",
            "k": "number (optional) - Number of nearest neighbors for voting (default: 7, recommended: 7)"
          }
        }
      },
      {
        "path": "/health",
        "method": "GET",
        "description": "Health check endpoint for the automated annotation service",
        "parameters": {}
      }
    ]
  },
  "aws": {
    "region": "eu-west-2",
    "account_id": "193757560043",
    "vpc_id": "vpc-04e79f1770f4205de"
  },
  "access": {
    "internal": true,
    "external": true,
    "auth_config": {
      "cognito": {
        "user_pool_arn": "arn:aws:cognito-idp:eu-west-2:193757560043:userpool/eu-west-2_JyaPgaRFW",
        "cors_origin": "*"
      },
      "api_key": {
        "cors_origin": "*"
      }
    }
  },
  "llm": {}
}
